
"""
Кейс-задача № 1

Программа выполняет:
- Запрашивает у пользователя последовательно день его рождения, месяц и год;
- Определяет какому дню недели соответствует эта дата;
- Определяет - високосный это был год, или нет?
- Определяет сколько сейчас лет пользователю;
- Реализуйте вывод в консоль даты рождения пользователя в формате дд мм гггг, где цифры формируются звёздочками (*),
как на электронном табло (LED Scoreboard).

"""
# Импорт модуля datetime
from datetime import date


def get_day_of_week(day, month, year):
    """
    Функция определяет день недели для даты, которую вводит пользователь
    Входные параметры: day (int): День, month (int): Месяц, year (int): Год
    Возвращает: str: Название дня недели на русском языке

    """
    # Список названий дней недели
    day_of_week = ['Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота', 'Воскресенье']
    # Индексы соответствуют значениям, возвращаемым методом weekday()
    try:
        # Объект date для указанной даты
        obj_date = date(year, month, day)
        # Метод weekday() возвращает число от 0 (понедельник) до 6 (воскресенье)
        # Индексы соответствуют значениям, возвращаемым методом weekday()
        index = obj_date.weekday()
        # Возврат соответствующего названия дня недели из списка

        return day_of_week[index]
    except ValueError as e:
        # Обработка при некорректном вводе даты
        return f"Ошибка: {e}"




def is_leap_year(year):
    """
    Функция, которая определяет, является ли год високосным по введённой дате
    Входной параметр: year (int): Год
    Возвращает (bool): True если год високосный, False в противном случае

    """
    if (year % 4 == 0 and year % 100 != 0) or year % 400 == 0:
        return True
    else:
        return False
    
    # Год является високосным, если его значение кратно 4 и не кратно 100 или кратно 400

def calculate_age(day, month, year):
    """
    Функция определяет сколько сейчас лет пользователю.
    Входные параметры: day (int): День, month (int): Месяц, year (int): Год
    Возвращает (int): Возраст пользователя

    """
    # Присвоение текущей даты
    today = date.today()
    # Объект birth_date для указанной даты
    birth_date = date(year, month, day)
    # Получение разности в годах
    age = today.year - birth_date.year

    # Проверка, был ли уже день рождения в текущем году
    # Если текущая дата (месяц, день) меньше даты рождения, то день рождения ещё не наступил
    # В этом случае возраст уменьшается на 1
    if (today.month, today.day) < (birth_date.month, birth_date.day):
        age -= 1

    return age


def get_num_pattern(num):
    """
    Функция формирует список из 5 строк.
    Входные параметры(аргументы) (int): Цифра от 0 до 9
    Возвращает (list): Список из 5 строк, представляющих цифру

    """
    # Паттерн состоит из 5 строк по 5 символов (звёздочки и пробелы)
    patterns = {
        0: ['*****', '*   *', '*   *', '*   *', '*****'],
        # Строки для цифры 0
        1: ['   * ', '  ** ', ' * * ', '   * ', '   * '],
        # Строки для цифры 1
        2: ['*****', '    *', '*****', '*    ', '*****'],
        # Строки для цифры 2
        3: ['*****', '    *', '*****', '    *', '*****'],
        # Строки для цифры 3
        4: ['*   *', '*   *', '*****', '    *', '    *'],
        # Строки для цифры 4
        5: ['*****', '*    ', '*****', '    *', '*****'],
        # Строки для цифры 5
        6: ['   * ', ' *   ', '*****', '*   *', '*****'],
        # Строки для цифры 6
        7: ['*****', '    *', '   * ', '   * ', '   * '],
        # Строки для цифры 7
        8: ['*****', '*   *', '*****', '*   *', '*****'],
        # Строки для цифры 8
        9: ['*****', '*   *', '*****', '   * ', ' *   ']
        # Строки для цифры 9
    }
    # Возврат паттерна для указанной цифры, или пустого паттерна, если цифра не найдена
    return patterns.get(num, ['   ', '   ', '   ', '   ', '   '])


def print_date_pattern(day, month, year):
    """
    Функция выводит (LED Scoreboard)
    Входные параметры: day (int): День, month (int): Месяц, year (int): Год
    Выводит на печать строки с объединёнными паттернами всех цифр

    """
    # Преобразование чисел для единообразного отображения
    day_str = f"{day:02d}"  # Число d будет не менее 2-х символов, при необходимости дополняясь ведущим нулем
    month_str = f"{month:02d}"  # Число d будет не менее 2-х символов, при необходимости дополняясь ведущим нулем
    year_str = f"{year:04d}"  # Число d будет не менее 4-х символов, при необходимости дополняясь ведущими нулями

    # Объединение всех частей (строка из 8 цифр (дд + мм + гггг))
    date_string = day_str + month_str + year_str

    # Сбор паттернов для всех цифр в дате
    # Для каждой цифры получается соответствующий паттерн из 5 строк
    all_patterns = []
    for char in date_string:
        num = int(char)
        all_patterns.append(get_num_pattern(num))

    # Вывод построчно паттернов (5 итераций)
    for row in range(5):
        stars_gap = []
        for i, pattern in enumerate(all_patterns):
            # Текущая строка паттерна для цифры
            stars_gap.append(pattern[row])
            # Пробел между днем и месяцем
            if i == 1:
                stars_gap.append(' ')
            # Пробел между месяцем и годом
            elif i == 3:
                stars_gap.append(' ')
        # Печать всех цифр
        print(' '.join(stars_gap))


def main():
    """
    Основной блок программы.
    Выполняет запрос данных последовательно, вызовы функций и вывод результатов

    """
    # Заголовок программы
    print("Кейс-задача № 1")
    print("* Запрос данных у пользователя последовательно: день его рождения, месяц и год.")
    print("* Определение дня недели, который соответствует данной дате.")
    print("* Определение возраста пользователя.")
    print("* Стилистическое преобразования чисел этой даты. (LED Scoreboard)")
    print()
    # Блок обработки ввода данных с обработкой возможных ошибок
    try:
        # Ввод дня рождения с преобразованием строки в целое число
        day = int(input("Напишите день вашего рождения и нажмите enter: "))
        # Запрос месяца рождения с преобразованием строки в целое число
        month = int(input("Напишите (цифрой от 1 до 12) месяц вашего рождения и нажмите enter: "))
        # Запрос года рождения с преобразованием строки в целое число
        year = int(input("Напишите год вашего рождения и нажмите enter: "))

        print()
        print()
        # Вызов функции для определения дня недели и вывод результата
        day_of_week = get_day_of_week(day, month, year)
        print(f"День недели: {day_of_week}")

        # Вызов функции для проверки високосного года
        leap = is_leap_year(year)
        # Формирование текстового описания результата проверки
        leap_text = " был високосным" if leap else " не был високосным"
        print(f"Год {year} - {leap_text}")

        # Вызов функции для вычисления возраста и вывод результата
        age = calculate_age(day, month, year)
        print(f"Возраст: {age} лет(год(а))")

        print()
        print("Стилистическое написание даты рождения:")
        print()
        # Вызов функции для отображения даты звёздочками
        print_date_pattern(day, month, year)

    # Обработка ошибки при некорректном вводе (не число)
    except ValueError:
        print("Некорректный ввод значений. Запустите программу повторно и введите корректные значения.")
    # Обработка любых других ошибок
    except Exception as e:
        print(f"Ошибка: {e}")


# Конструкция используется при прямом запуске файла, а не при импорте
if __name__ == "__main__":
    main()